<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Shoes Products Admin</title>
  <link rel="stylesheet" href="catagory.css" />
</head>

<body>
  

  <main>
    <h1>Shoes Products</h1>
    <input type="text" id="productIdInput" placeholder="Enter Product ID" />
    <button onclick="addProduct()">Add Product to Shoes</button>

    <div id="shoesList"></div>
  </main>

  <script>
  async function loadShoes() {
    const res = await fetch('https://wahuserver.onrender.com/api/shoes');
    const products = await res.json();

    const list = document.getElementById('shoesList');
    list.innerHTML = "";

    products.forEach(p => {
      const div = document.createElement('div');

      // Fix moreImages display (Cloudinary URLs)
      const moreImagesHTML = p.moreImages && Array.isArray(p.moreImages)
        ? p.moreImages.map(img => `<img src="${img.url}" width="40" style="margin:3px;" />`).join("")
        : "";

      // Fix main image (Cloudinary URL)
      const mainImage = p.image?.url || "";

      div.innerHTML = `
      <div class="div17">
        <img src="${mainImage}" width="60" />
        ${moreImagesHTML}
        <strong>${p.name}</strong> - â‚¹${p.price} 
        <button onclick="deleteProduct('${p._id}')">Delete</button></div>
      `;

      list.appendChild(div);
    });
  }


  
  async function addProduct() {
    const id = document.getElementById("productIdInput").value;
    if (!id) return alert("Enter Product ID");

    const res = await fetch('https://wahuserver.onrender.com/api/shoes', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ productId: id })
    });

    const data = await res.json();
    alert(data.message || data.error);
    loadShoes();
  }

  async function deleteProduct(id) {
    if (!confirm("Remove from Shoes category?")) return;

    const res = await fetch(`https://wahuserver.onrender.com/api/shoes/${id}`, {
      method: 'DELETE'
    });

    const data = await res.json();
    alert(data.message || data.error);
    loadShoes();
  }

  // Load on start
  loadShoes();
</script>

</body>


</html>
